# Terminology

This document defines common terms and concepts used across the Aida testing infrastructure.

## Core Concepts

### AidaDb

The central filesystem-based database containing substates, update-sets, deleted accounts, state
hashes, and metadata. It serves as the primary data source for all offline testing and replay tools.
Managed by [`util-db`](commands/util-db.md).

### Substate

A minimal fragment of the world-state (accounts, balances, nonces, code, and storage key/value
pairs) and the transaction message required to execute a specific transaction or block in isolation.
Substates enable off-chain replay without a full node.

### UpdateSet

A precomputed set of merged state changes from a range of blocks. Used to "fast-forward" a StateDB
to a target block height without replaying the entire transaction history. Generated by
[`util-updateset`](commands/util-updateset.md).

### StateDB

The database holding the current world-state (account balances, nonces, code, and storage). Aida
supports multiple implementations: **Carmen**, **Geth**, and an **in-memory** variant. The StateDB
is the primary System Under Test (SUT) in Aida.

### World-State

The complete set of all account states on the blockchain at a given block height. Includes balances,
nonces, contract code, and storage key/value pairs for every account.

## Architecture Terms

### Provider

A data source that streams transactions to the [Executor](architecture/README.md). Implementations:
SubstateProvider, EthTestProvider, RpcRequestProvider, NormaTxProvider. See
[Providers](architecture/Providers.md).

### Processor

The engine that executes a transaction against a StateDB. Backends include go-ethereum's EVM and
Tosca. See [Processors](architecture/Processors.md).

### Extension

A modular hook that decorates transaction processing. Extensions observe or modify execution at 6
lifecycle points (PreRun, PostRun, PreBlock, PostBlock, PreTransaction, PostTransaction). See
[Extensions](architecture/extensions/README.md).

### Executor

The orchestrator that ties Provider, Processor, and Extensions together. Manages the
block/transaction iteration loop and hook delivery. See [Architecture
Overview](architecture/README.md).

### NilExtension

A base extension implementation where all hooks return nil. New extensions embed `NilExtension` and
override only the hooks they need.

## Database Terms

### Priming

The process of pre-loading a StateDB with state data (from UpdateSets or Substates) before execution
begins. Fast-forwards the StateDB to a target block height. See [Primer
Extensions](architecture/extensions/primer.md).

### ShadowDb

A proxy wrapper that mirrors all StateDB operations to two implementations simultaneously for
comparison and validation. Slows down execution since every operation runs twice.

**Without an existing StateDb:** use `--shadow-db` with `--db-shadow-impl` (carmen, geth...) and
`--db-shadow-variant` (go-file, cpp-file...). With `--keep-db`, both are preserved at
`path/to/state/db/tmp/prime` and `path/to/state/db/tmp/shadow`.

**With an existing StateDb:** use `--shadow-db` and point `--db-src` to a directory containing two
subdirectories: `prime` and `shadow`. Implementation and variant are read from `statedb_info.json`.

### Archive / ArchiveDb

A historical view of the StateDB at a specific block height. Used for validating that past states
produce correct results when queried or replayed.

## Execution Terms

### Block Range

Specified as `[from, to]` â€” inclusive start, inclusive end. Most Aida tools accept `<blockNumFirst>
<blockNumLast>` as arguments.

### Pseudo-Transaction

A special non-EVM transaction representing chain-level state changes: SFC (Special Function
Contract) calls, genesis initialization, or the Lachesis-Opera transition (Block 0-4.5M on Opera chain).

### Fork

An EVM revision identifier (e.g., Istanbul, Berlin, London, Paris, Shanghai, Cancun, Prague, Osaka).
Determines which EVM rules apply during transaction processing.

## External Components

### Carmen

Sonic Labs' high-performance StateDB implementation. The primary System Under Test for most Aida
workflows. Repo: [0xsoniclabs/carmen](https://github.com/0xsoniclabs/carmen).

### Tosca

Sonic Labs' high-performance implementation of EVM. VM/processor backend with pluggable interpreters
(floria, geth, opera). Used via `--evm-impl` to test different execution engines. Repo:
[0xsoniclabs/tosca](https://github.com/0xsoniclabs/tosca).

### Norma

A synthetic transaction generation framework. Powers the `tx-generator` subcommand in `aida-vm-sdb`
for stress testing without real chain data. Repo:
[Fantom-foundation/Norma](https://github.com/Fantom-foundation/Norma).
